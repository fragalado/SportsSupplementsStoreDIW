@{
	ViewData["Title"] = "Carrito";
	List<CarritoDTO> carritos = ViewBag.carritos;
	List<SuplementoDTO> suplementos = ViewBag.suplementos;
}

<div class="row tablaAdmin">
	<div class="col">
		<!-- Formulario -->
		<form method="post">
			<!-- Tabla -->
			<table class="table table-dark table-hover text-center">
				<thead>
					<tr>
						<th scope="col">#</th>
						<th scope="col">Suplemento</th>
						<th scope="col">Cantidad</th>
						<th scope="col">Precio unidad</th>
						<th scope="col">Eliminar</th>
					</tr>
				</thead>
				<tbody>
					@if (carritos == null || carritos.Count == 0)
					{
						<tr>
							<td colspan="5" style="text-align: center">No existe ningún suplemento añadido al carrito.</td>
						</tr>
					}
					else
					{
						@foreach (var carrito in carritos)
						{
							<!-- Obtenemos el suplemento del carrito -->
							var suplemento = suplementos.FirstOrDefault(s => s.Id_suplemento == carrito.ID_suplemento);

							<!-- Mostramos los datos -->
							<tr>
								<th scope="row"><img src="@suplemento.RutaImagen_suplemento" class="img-fluid" style="max-width: 80px; max-height: 80px;" alt="@suplemento.Nombre_suplemento"></th>
								<td>@suplemento.Nombre_suplemento</td>
								<td>@carrito.Cantidad</td>
								<td>@suplemento.Precio_suplemento</td>
								<td>
									<i class="fa-solid fa-trash" style="color: red; cursor: pointer;" onclick="compruebaEliminar(@carrito.ID_suplemento)"></i>
								</td>
							</tr>
						}
						<tr>
							<td colspan="5" style="text-align: right; padding-right: 30px;">Precio total: <input name="total"></td>
						</tr>
					}
				</tbody>
			</table>
			<!-- Fin Tabla -->
			<!-- Boton comprar -->
			@if (carritos != null && carritos.Count > 0)
			{
				<button class="btn btn-primary" style="float: right;">Comprar</button>
			}
			<!-- Fin Boton comprar -->
		</form>
		<!-- Fin Formulario -->
	</div>
</div>